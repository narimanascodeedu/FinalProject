@model Product

@{
    ViewData["Title"] = "Details";
}

<!-- Begin Li's Breadcrumb Area -->
<div class="breadcrumb-area">
    <div class="container">
        <div class="breadcrumb-content">
            <ul>
                <li><a asp-controller="home" asp-action="index">Əsas</a></li>
                <li><a asp-controller="shop" asp-action="index">Alış Veriş</a></li>
                <li class="active">@Model.Name.Substring(0, (Model.Name.Length < 100 ? Model.Name.Length : 100))...</li>
            </ul>
        </div>
    </div>
</div>
<!-- Li's Breadcrumb Area End Here -->
<!-- content-wraper start -->
<div class="content-wraper">
    <div class="container">
        <div class="row single-product-area">
            <div class="col-lg-5 col-md-6">
                <!-- Begin Single Product Gallery Left Area -->
                <div class="sp-gallery-left pt-60">
                    <div class="row no-gutters">
                        @foreach (var item in Model.Images)
                        {
                            <div class="col-lg-6">
                                <div class="lg-image">
                                    <img class="img-full" src="~/uploads/images/@item.Name" alt="product image">
                                </div>
                            </div>
                        }

                    </div>
                </div>
                <!--// Single Product Gallery Left Area End Here -->
            </div>

            <div class="col-lg-7 col-md-6">
                <div class="product-details-view-content pt-60">
                    <div class="product-info">
                        <h2>@Model.Name</h2>
                        @*<div class="rating-box pt-20">
                            <ul class="rating rating-with-review-item">
                            <li><i class="fa fa-star-o"></i></li>
                            <li><i class="fa fa-star-o"></i></li>
                            <li><i class="fa fa-star-o"></i></li>
                            <li class="no-star"><i class="fa fa-star-o"></i></li>
                            <li class="no-star"><i class="fa fa-star-o"></i></li>
                            <li class="review-item"><a href="#">Read Review</a></li>
                            <li class="review-item"><a href="#">Write Review</a></li>
                            </ul>
                            </div>*@
                        <div class="price-box pt-20">
                            <span class="new-price new-price-2">@Model.Price.ToString("0.00₼")</span>
                        </div>
                        <div class="product-desc">
                            <p>
                                <span>
                                    @Html.Raw(Model.ShortDescription)
                                </span>
                            </p>
                        </div>
                        <div class="product-variants">
                            <div class="produt-variants-size">
                                <p><span class="tittle-details">Marka:</span>   @Model.Brand?.Name</p>
                                <p><span class="tittle-details">Kateqoriya:</span>   @Model.Category?.Name</p>

                                @foreach (var item in Model.ProductCatalog)
                                {
                                    <p><span class="tittle-details">Həcm:</span>   @item.ProductLiter.Name</p>
                                    <p><span class="tittle-details">Uyğunluq:</span>   @item.ProductViscosity.Name</p>
                                    <p><span class="tittle-details">Növü:</span>   @item.ProductType.Name</p>
                                    <p><span class="tittle-details">Api Standartı:</span>   @item.ProductApi.Name</p>
                                }

                            </div>
                        </div>
                        <div class="single-add-to-cart">
                            <div class="cart-quantity">
                                <button onclick="addToBasket(event)" data-product-id="@Model.Id" class="add-to-cart-dts">Səbətə əlavə et</button>
                            </div>
                        </div>
                        <div class="product-additional-info pt-25">
                            <a class="wishlist-btn" href="javascript:addToFavorites(@Model.Id)"><i class="fa fa-heart-o"></i>İstək siyahısına əlavə et</a>
                            <div class="product-social-sharing pt-25">
                                <ul>
                                    <li class="facebook"><a href="#"><i class="fa fa-facebook"></i>Facebook</a></li>
                                    <li class="twitter"><a href="#"><i class="fa fa-twitter"></i>Twitter</a></li>
                                    <li class="google-plus"><a href="#"><i class="fa fa-google-plus"></i>Google +</a></li>
                                    <li class="instagram"><a href="#"><i class="fa fa-instagram"></i>Instagram</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="block-reassurance">
                            <ul>
                                <li>
                                    <div class="reassurance-item">
                                        <div class="reassurance-icon">
                                            <i class="fa fa-check-square-o"></i>
                                        </div>
                                        <p>Təhlükəsiz</p>
                                    </div>
                                </li>
                                <li>
                                    <div class="reassurance-item">
                                        <div class="reassurance-icon">
                                            <i class="fa fa-truck"></i>
                                        </div>
                                        <p>Çatdırma</p>
                                    </div>
                                </li>
                                <li>
                                    <div class="reassurance-item">
                                        <div class="reassurance-icon">
                                            <i class="fa fa-exchange"></i>
                                        </div>
                                        <p>Qaytarma</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- content-wraper end -->
<!-- Begin Product Area -->
<div class="product-area pt-35">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="li-product-tab">
                    <ul class="nav li-product-menu">
                        <li><a class="active" data-toggle="tab" href="#description"><span>Təsvir</span></a></li>
                        <li><a data-toggle="tab" href="#product-details"><span>Məhsul Təfərrüatları</span></a></li>
                        <li><a data-toggle="tab" href="#reviews"><span>Reviews</span></a></li>
                    </ul>
                </div>
                <!-- Begin Li's Tab Menu Content Area -->
            </div>
        </div>
        <div class="tab-content">
            <div id="description" class="tab-pane active show" role="tabpanel">
                <div class="product-description">
                    <span>@Html.Raw(Model.Description)</span>
                </div>
            </div>
            <div id="product-details" class="tab-pane" role="tabpanel">
                <div class="product-details-manufacturer">
                    <a href="#">
                        <img src="images/product-details/1.jpg" alt="Product Manufacturer Image">
                    </a>
                    <p><span>Reference</span> demo_7</p>
                    <p><span>Reference</span> demo_7</p>
                </div>
            </div>
            <div id="reviews" class="tab-pane" role="tabpanel">
                <div class="product-reviews">
                    <div class="product-details-comment-block">
                        <div class="comment-review">
                            <span>Grade</span>
                            <ul class="rating">
                                <li><i class="fa fa-star-o"></i></li>
                                <li><i class="fa fa-star-o"></i></li>
                                <li><i class="fa fa-star-o"></i></li>
                                <li class="no-star"><i class="fa fa-star-o"></i></li>
                                <li class="no-star"><i class="fa fa-star-o"></i></li>
                            </ul>
                        </div>
                        <div class="comment-author-infos pt-25">
                            <span>HTML 5</span>
                            <em>01-12-18</em>
                        </div>
                        <div class="comment-details">
                            <h4 class="title-block">Demo</h4>
                            <p>Plaza</p>
                        </div>
                        <div class="review-btn">
                            <a class="review-links" href="#" data-toggle="modal" data-target="#mymodal">Write Your Review!</a>
                        </div>
                        <!-- Begin Quick View | Modal Area -->
                        <div class="modal fade modal-wrapper" id="mymodal">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <h3 class="review-page-title">Write Your Review</h3>
                                        <div class="modal-inner-area row">
                                            <div class="col-lg-6">
                                                <div class="li-review-product">
                                                    <img src="images/product/large-size/3.jpg" alt="Li's Product">
                                                    <div class="li-review-product-desc">
                                                        <p class="li-product-name">Today is a good day Framed poster</p>
                                                        <p>
                                                            <span>Beach Camera Exclusive Bundle - Includes Two Samsung Radiant 360 R3 Wi-Fi Bluetooth Speakers. Fill The Entire Room With Exquisite Sound via Ring Radiator Technology. Stream And Control R3 Speakers Wirelessly With Your Smartphone. Sophisticated, Modern Design </span>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="li-review-content">
                                                    <!-- Begin Feedback Area -->
                                                    <div class="feedback-area">
                                                        <div class="feedback">
                                                            <h3 class="feedback-title">Our Feedback</h3>
                                                            <form action="#">
                                                                <p class="your-opinion">
                                                                    <label>Your Rating</label>
                                                                    <span>
                                                                        <select class="star-rating">
                                                                            <option value="1">1</option>
                                                                            <option value="2">2</option>
                                                                            <option value="3">3</option>
                                                                            <option value="4">4</option>
                                                                            <option value="5">5</option>
                                                                        </select>
                                                                    </span>
                                                                </p>
                                                                <p class="feedback-form">
                                                                    <label for="feedback">Your Review</label>
                                                                    <textarea id="feedback" name="comment" cols="45" rows="8" aria-required="true"></textarea>
                                                                </p>
                                                                <div class="feedback-input">
                                                                    <p class="feedback-form-author">
                                                                        <label for="author">
                                                                            Name<span class="required">*</span>
                                                                        </label>
                                                                        <input id="author" name="author" value="" size="30" aria-required="true" type="text">
                                                                    </p>
                                                                    <p class="feedback-form-author feedback-form-email">
                                                                        <label for="email">
                                                                            Email<span class="required">*</span>
                                                                        </label>
                                                                        <input id="email" name="email" value="" size="30" aria-required="true" type="text">
                                                                        <span class="required"><sub>*</sub> Required fields</span>
                                                                    </p>
                                                                    <div class="feedback-btn">
                                                                        <a href="#" class="close" data-dismiss="modal" aria-label="Close">Close</a>
                                                                        <a href="#">Submit</a>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                    <!-- Feedback Area End Here -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Quick View | Modal Area End Here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Product Area End Here -->
@section addcss{
<style>
    .tittle-details {
        font-weight: 700;
    }

    .cart-quantity .add-to-cart-dts {
        border: none;
        font-size: 14px;
        color: #242424;
        position: relative;
        background: #aaaaaa;
        cursor: pointer;
        font-weight: 500;
        text-transform: capitalize;
        padding: 13px 70px !important;
        border-radius: 2px;
        transition: all 0.3s ease-in-out;
    }

        .cart-quantity .add-to-cart-dts:hover {
            background: #242424;
            color: #ffffff;
        }
</style>
}
@section addjs{
<script>
        function addToBasket(e) {
        e.preventDefault();

        let elementData = $(e.currentTarget).data();

        $.ajax({
            url: `@Url.Action("Basket","Shop")`,
            type: 'POST',
            data: elementData,
            contentType: 'application/x-www-form-urlencoded',
            success: function(response){
                console.log(response);

                if (response.error == false) {
                    toastr.success(response.message,'Success');
                    return;
                }
                toastr.error(response.message,'Error');
            },
            error: function(response, status, xhr) {
                console.log(response, status, xhr);
            }
        });
    }
    function addToFavorites(productId)
        {
            const favorites = ($.cookie('favorites') || '').split(',').filter(item => item.length > 0);

            if (favorites.filter(item => item == productId).length == 0)
            {
                favorites.push(productId);

                $.cookie('favorites',favorites.toString(),{ path: '/' })
            }
            console.log($.cookie('favorites'));

        }
</script>
}